# API設計
## 1. ユーザー認証API
- **エンドポイント:** `/api/auth/google`
- **メソッド:** GET
- **説明:** Google OAuth認証を開始し、ユーザーをGoogleの認証画面にリダイレクトします。
- **リクエストパラメータ:** なし
- **レスポンス:**
  - **成功:** Googleの認証画面にリダイレクト
  - **エラー:** 適切なエラーメッセージを返します。

## 2. フォルダリスト取得API
- **エンドポイント:** `/api/folders`
- **メソッド:** GET
- **説明:** ユーザーのGoogleドライブからフォルダのリストを取得します。
- **リクエストパラメータ:** なし
- **レスポンス:**
  - **成功:**
    ```json
    {
      "folders": [
        {
          "id": "folderId1",
          "name": "フォルダ名1",
          "createdAt": "2023-10-01T12:00:00Z"
        },
        {
          "id": "folderId2",
          "name": "フォルダ名2",
          "createdAt": "2023-10-02T15:30:00Z"
        }
      ]
    }
    ```
  - **エラー:** エラーメッセージを返します。

## 3. フォルダ選択API
- **エンドポイント:** `/api/folders/select`
- **メソッド:** POST
- **説明:** OCR処理のためのフォルダを選択します。
- **リクエストパラメータ:**
  - `folderId` (string): 選択するフォルダのID
    ```json
    {
      "folderId": "選択したフォルダのID"
    }
    ```
- **レスポンス:**
  - **成功:**
    ```json
    {
      "message": "フォルダが正常に選択されました。",
      "folderId": "選択したフォルダのID"
    }
    ```
  - **エラー:** エラーメッセージを返します。

## 4. PDFリスト取得API
- **エンドポイント:** `/api/pdfs`
- **メソッド:** GET
- **説明:** 選択したフォルダ内のPDFファイルのリストを取得します。
- **リクエストパラメータ:** なし
- **レスポンス:**
  - **成功:**
    ```json
    {
      "pdfs": [
        {
          "id": "pdfId1",
          "name": "ファイル名1.pdf",
          "uploadedAt": "2023-10-03T10:00:00Z",
          "status": "処理完了"
        },
        {
          "id": "pdfId2",
          "name": "ファイル名2.pdf",
          "uploadedAt": "2023-10-04T11:30:00Z",
          "status": "処理中"
        }
      ]
    }
    ```
  - **エラー:** エラーメッセージを返します。

## 5. OCR結果取得API
- **エンドポイント:** `/api/ocr/:pdfId`
- **メソッド:** GET
- **説明:** 特定のPDFファイルのOCR結果を取得します。
- **リクエストパラメータ:**
  - `pdfId` (string): OCR結果を取得するPDFファイルのID
- **レスポンス:**
  - **成功:**
    ```json
    {
      "pdfId": "pdfId1",
      "content": "OCRによって抽出されたテキストコンテンツ"
    }
    ```
  - **エラー:** エラーメッセージを返します。

## 6. OCR結果更新API
- **エンドポイント:** `/api/ocr/:pdfId`
- **メソッド:** PUT
- **説明:** OCR結果を更新します。
- **リクエストパラメータ:**
  - `pdfId` (string): OCR結果を更新するPDFファイルのID
  - ボディ:
    ```json
    {
      "content": "更新されたOCRテキストコンテンツ"
    }
    ```
- **レスポンス:**
  - **成功:**
    ```json
    {
      "message": "OCR結果が正常に更新されました。",
      "pdfId": "pdfId1"
    }
    ```
  - **エラー:** エラーメッセージを返します。

## 7. CSVエクスポートAPI
- **エンドポイント:** `/api/export/csv`
- **メソッド:** GET
- **説明:** すべてのOCR結果をCSV形式でエクスポートします。
- **リクエストパラメータ:** なし
- **レスポンス:**
  - **成功:** CSVファイルをダウンロードします。
  - **エラー:** エラーメッセージを返します。