## ドキュメント
https://japan-marketing-co-jp.gitbook.io/bizmate/

---

# 要件仕様

## 1. 序論
このドキュメントは、OCRサービスのウェブアプリケーション開発のための要件仕様です。このサービスでは、ユーザーはGoogleアカウントでログインし、指定したGoogleドライブからPDFファイルを自動的にインポートし、OCR処理を行います。処理結果はウェブ上で閲覧・編集することができ、またCSV形式でダウンロードすることも可能です。

## 2. システム概要
**プラットフォーム:** Webアプリケーション  
**技術スタック:**  
- フロントエンド: Next.js (Vercel), TypeScript
- バックエンド, データベース, ストレージ: Vercel
- ユーザー認証: Googleログインのみ

## 3. 機能要件

### 3.1 ユーザー認証
- Googleログイン機能
- OAuth 2.0を使用してGoogleアカウントでログイン
- 他のログイン方法は提供されていません

### 3.2 Googleドライブとの連携
- **Googleドライブの選択:**  
  ログイン後、ユーザーはGoogleドライブからフォルダを選択します
- **PDFデータのインポート:**  
  選択したフォルダにアップロードされたPDFファイルを自動的にインポートし、Vercelのストレージに保存します  
  新規アップロードがある場合はリアルタイムでインポートします

### 3.3 PDFリストの表示
- **PDFファイルリストの表示:**  
  インポートされたPDFファイルをリスト形式で表示します  
  ファイル名、アップロード日、処理状況などの情報を表示します

### 3.4 OCR結果の表示
- **OCR結果とPDFの同時表示:**  
  詳細画面では、左側にOCR結果、右側にPDFのプレビューを表示します  
  OCR結果はテキストエリアで編集可能です

### 3.5 OCR詳細画面
- **保存機能:**  
  "保存"ボタンでOCR結果を確認し保存します
- **ナビゲーション:**  
  ヘッダーに"次へ"と"戻る"のボタンを配置し、他のファイルへの移動を容易にします

### 3.6 CSVダウンロード
- **OCR結果のエクスポート:**  
  OCR結果をすべてCSV形式でダウンロードします  
  ダウンロードボタンを提供します

## 4. 非機能要件

### 4.1 パフォーマンス
- **応答時間:**  
  ページ遷移やデータロードは3秒以内に完了すること
- **同時アクセス:**  
  複数のユーザーが同時にサービスを利用してもパフォーマンスを維持すること

### 4.2 セキュリティ
- **データ保護:**  
  ユーザーデータは暗号化されて保存されます
- **アクセス制限:**  
  ユーザーごとにデータへのアクセスを制限します

### 4.3 ユーザビリティ
- **直感的なUI:**  
  初めてのユーザーでも迷わず操作できるデザイン
- **レスポンシブデザイン:**  
  PC、タブレット、スマートフォンからのアクセスに対応

## 5. システム構成

### 5.1 フロントエンド
- **Next.js:**  
  サーバーサイドレンダリングによる高速なページ表示
- **TypeScript:**  
  型定義による安全なコード作成

### 5.2 バックエンド
- **APIルート:**  
  Next.jsのAPIルートを使用したサーバーサイド処理の実装
- **データベース & ストレージ:**  
  Vercelが提供するデータベースサービスの利用

### 5.3 外部サービスの統合
- **Google API:**  
  Google Drive APIを使用してファイルにアクセス  
  Google OAuth 2.0を使用した認証と認可の実装

## 6. ユーザーインターフェース詳細

### 6.1 ログイン画面
- **Googleログインボタン:**  
  クリックするとGoogleの認証画面にリダイレクトします

### 6.2 フォルダ選択画面
- **Googleドライブフォルダリストの表示:**  
  ユーザーのドライブからフォルダを選択します

### 6.3 PDFリスト画面
- **ファイルリスト:**  
  サムネイル、ファイル名、ステータスを表示します
- **操作:**  
  ファイルをクリックすると詳細画面に移動します

### 6.4 OCR詳細画面
- **表示エリア:**  
  左: OCR結果テキストエリア（編集可能）  
  右: PDFプレビュー
- **操作ボタン:**  
  ヘッダーに"次へ"、"戻る"、"保存"のボタンを配置します

### 6.5 CSVダウンロード画面
- **ダウンロードボタン:**  
  クリックするとCSVファイルを生成しダウンロードします
- **進行状況の表示:**  
  ダウンロード処理中はプログレスバーを表示します

## 7. エラーハンドリング
- **認証エラー:**  
  ログインに失敗した場合は適切なエラーメッセージを表示します
- **ファイル取得エラー:**  
  Googleドライブからのファイル取得に失敗した場合はリトライオプションを提供します
- **保存エラー:**  
  OCR結果の保存に失敗した場合はユーザーに通知し、データの再送信を促します

## 8. ログとモニタリング
- **アクセスログ:**  
  ユーザーのアクセス状況をログとして記録します
- **エラーログ:**  
  システムのエラーや例外をデバッグのために記録します
- **モニタリング:**  
  システムの運用状況をリアルタイムで監視します

## 9. セキュリティ要件
- **HTTPS通信:**  
  SSL/TLSで全ての通信を暗