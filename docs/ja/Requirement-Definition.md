## ドキュメント
https://japan-marketing-co-jp.gitbook.io/bizmate/

---

# 要件仕様書

## 1. はじめに
本書は、OCRサービスのWebアプリケーション開発のための要件仕様書です。このサービスでは、ユーザーがGoogleアカウントでログインし、指定したGoogleドライブからPDFファイルを自動的にインポートし、OCR処理を行います。処理結果はWeb上で閲覧・編集が可能で、CSV形式でダウンロードすることもできます。

## 2. システム概要
**プラットフォーム:** Webアプリケーション  
**技術スタック:**  
- フロントエンド: Next.js (Vercel), TypeScript
- バックエンド, データベース, ストレージ: Vercel
- ユーザー認証: Googleログインのみ

## 3. 機能要件

### 3.1 ユーザー認証
- Googleログイン機能
- OAuth 2.0を使用してGoogleアカウントでログイン
- 他のログイン方法は提供されない

### 3.2 Googleドライブの統合
- **Googleドライブの選択:**  
  ログイン後、ユーザーはGoogleドライブからフォルダを選択
- **PDFデータのインポート:**  
  選択したフォルダにアップロードされたPDFファイルを自動的にインポートし、Vercelのストレージに保存  
  新しいアップロードがあった場合はリアルタイムでインポート

### 3.3 PDFリストの表示
- **PDFファイルリストの表示:**  
  インポートされたPDFファイルをリスト形式で表示  
  ファイル名、アップロード日、処理状況などの情報を表示

### 3.4 OCR結果の表示
- **OCR結果とPDFの同時表示:**  
  詳細画面で、OCR結果を左側に、PDFプレビューを右側に表示  
  OCR結果はテキストエリアで編集可能

### 3.5 OCR詳細画面
- **保存機能:**  
  「保存」ボタンでOCR結果を確認・保存
- **ナビゲーション:**  
  ヘッダーに「次へ」、「戻る」ボタンを配置し、他のファイルへの移動を容易にする

### 3.6 CSVダウンロード
- **OCR結果のエクスポート:**  
  全てのOCR結果をCSV形式で一括ダウンロード  
  ダウンロードボタンを提供

## 4. 非機能要件

### 4.1 パフォーマンス
- **応答時間:**  
  ページ遷移とデータロードは3秒以内に完了
- **同時アクセス:**  
  複数のユーザーが同時にサービスを使用してもパフォーマンスを維持

### 4.2 セキュリティ
- **データ保護:**  
  ユーザーデータは暗号化して保存
- **アクセス制限:**  
  ユーザーごとにデータへのアクセスを制限

### 4.3 ユーザビリティ
- **直感的なUI:**  
  初めてのユーザーでも迷わず操作できるデザイン
- **レスポンシブデザイン:**  
  PC、タブレット、スマートフォンからのアクセスに対応

## 5. システム構成

### 5.1 フロントエンド
- **Next.js:**  
  サーバーサイドレンダリングによる高速なページ表示
- **TypeScript:**  
  型定義による安全なコード記述

### 5.2 バックエンド
- **APIルート:**  
  Next.jsのAPIルートを使用したサーバーサイド処理の実装
- **データベース & ストレージ:**  
  Vercelで提供されるデータベースサービスの使用

### 5.3 外部サービスの統合
- **Google API:**  
  GoogleドライブAPIを使用してファイルにアクセス  
  Google OAuth 2.0で認証と認可を実装

## 6. ユーザーインターフェース詳細

### 6.1 ログイン画面
- **Googleログインボタン:**  
  クリックするとGoogleの認証画面にリダイレクト

### 6.2 フォルダ選択画面
- **Googleドライブフォルダリスト表示:**  
  ユーザーのドライブからフォルダを選択

### 6.3 PDFリスト画面
- **ファイルリスト:**  
  サムネイル、ファイル名、ステータスを表示
- **操作:**  
  ファイルをクリックすると詳細画面に遷移

### 6.4 OCR詳細画面
- **表示エリア:**  
  左側: OCR結果テキストエリア（編集可能）  
  右側: PDFプレビュー
- **操作ボタン:**  
  ヘッダーに「次へ」、「戻る」、「保存」ボタンを配置

### 6.5 CSVダウンロード画面
- **ダウンロードボタン:**  
  クリックするとCSVファイルを生成・ダウンロード
- **進行状況表示:**  
  ダウンロード処理中はプログレスバーを表示

## 7. エラーハンドリング
- **認証エラー:**  
  ログインに失敗した場合は適切なエラーメッセージを表示
- **ファイル取得エラー:**  
  Googleドライブからのファイル取得に失敗した場合はリトライオプションを提供
- **保存エラー:**  
  OCR結果の保存に失敗した場合はユーザーに通知し、データの再送信を促す

## 8. ログとモニタリング
- **アクセスログ:**  
  ユーザーのアクセス状況をログとして記録
- **エラーログ:**  
  システムのエラーや例外をデバッグのために記録
- **モニタリング:**  
  システムの運用状況をリアルタイムで監視

## 9. セキュリティ要件
- **HTTPS通信:**  
  SSL/TLSで全ての通信を暗号化
- **データ暗号化:**  
  保存データに暗号化を適用
- **権限管理:**