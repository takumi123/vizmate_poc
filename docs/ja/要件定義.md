## Document
https://japan-marketing-co-jp.gitbook.io/bizmate/

---

# 要件定義書

## 1. はじめに
本ドキュメントは、OCRサービスのWebアプリケーション開発における要件定義書です。本サービスは、ユーザーがGoogleアカウントでログインし、指定したGoogle Drive内のPDFファイルを自動的に取り込み、OCR処理を行います。処理結果はウェブ上で閲覧・編集可能で、CSV形式でダウンロードすることもできます。

## 2. システム概要
**プラットフォーム:** Webアプリケーション  
**技術スタック:**  
- フロントエンド: Next.js（Vercel）、TypeScript
- バックエンド・データベース・ストレージ: Vercel
- ユーザー認証: Googleログインのみ

## 3. 機能要件

### 3.1 ユーザー認証
- Googleログイン機能
- OAuth 2.0を使用したGoogleアカウントでのログイン
- 他のログイン方法は提供しない

### 3.2 Google Drive連携
- **Google Driveの選択:**  
  ログイン後、ユーザーは自身のGoogle Driveから1つのフォルダを選択する
- **PDFデータの取り込み:**  
  選択したフォルダにアップロードされたPDFファイルを自動的に取り込み、Vercelのストレージに保存する  
  新規アップロード時にリアルタイムで取り込みを行う

### 3.3 PDF一覧表示
- **PDFファイルの一覧表示:**  
  取り込んだPDFファイルをリスト形式で表示  
  ファイル名、アップロード日時、処理ステータスなどの情報を表示

### 3.4 OCR結果表示
- **OCR結果とPDFの同時表示:**  
  詳細画面で左側にOCR結果、右側にPDFプレビューを表示  
  OCR結果はテキストエリアで編集可能

### 3.5 OCR詳細画面
- **保存機能:**  
  「保存」ボタンでOCR結果を確定・保存
- **ナビゲーション:**  
  ヘッダーに「次へ」「戻る」ボタンを配置し、他のファイルへの移動を容易にする

### 3.6 CSVダウンロード
- **OCR結果のエクスポート:**  
  すべてのOCR結果をCSV形式で一括ダウンロード  
  ダウンロードボタンを提供

## 4. 非機能要件

### 4.1 パフォーマンス
- **レスポンスタイム:**  
  ページ遷移やデータロードは3秒以内に完了する
- **同時アクセス:**  
  複数ユーザーの同時利用時にもパフォーマンスを維持

### 4.2 セキュリティ
- **データ保護:**  
  ユーザーデータは暗号化して保存
- **アクセス制限:**  
  ユーザーごとにデータへのアクセスを制限

### 4.3 ユーザビリティ
- **直感的なUI:**  
  初めてのユーザーでも迷わず操作できるデザイン
- **レスポンシブデザイン:**  
  PC、タブレット、スマートフォンからのアクセスに対応

## 5. システム構成

### 5.1 フロントエンド
- **Next.js:**  
  サーバーサイドレンダリングによる高速なページ表示
- **TypeScript:**  
  型定義による安全なコード記述

### 5.2 バックエンド
- **APIルート:**  
  Next.jsのAPIルートを使用してサーバーサイド処理を実装
- **データベース・ストレージ:**  
  Vercel上で提供されるデータベースサービスを使用

### 5.3 外部サービス連携
- **Google API:**  
  Google Drive APIを使用してファイルアクセス  
  Google OAuth 2.0で認証・認可を実装

## 6. ユーザーインターフェース詳細

### 6.1 ログイン画面
- **Googleログインボタン:**  
  クリックでGoogleの認証画面へリダイレクト

### 6.2 フォルダ選択画面
- **Google Driveフォルダの一覧表示:**  
  ユーザーのDriveからフォルダを選択

### 6.3 PDF一覧画面
- **ファイルリスト:**  
  サムネイル、ファイル名、ステータスを表示
- **操作:**  
  ファイルをクリックして詳細画面へ遷移

### 6.4 OCR詳細画面
- **表示領域:**  
  左側: OCR結果のテキストエリア（編集可能）  
  右側: PDFプレビュー
- **操作ボタン:**  
  ヘッダーに「次へ」「戻る」「保存」ボタンを配置

### 6.5 CSVダウンロード画面
- **ダウンロードボタン:**  
  クリックでCSVファイルを生成・ダウンロード
- **進行状況表示:**  
  ダウンロード処理中はプログレスバーを表示

## 7. エラー処理
- **認証エラー:**  
  ログイン失敗時には適切なエラーメッセージを表示
- **ファイル取得エラー:**  
  Google Driveからのファイル取得に失敗した場合、再試行オプションを提供
- **保存エラー:**  
  OCR結果の保存に失敗した場合、ユーザーに通知し、データの再送信を促す

## 8. ログとモニタリング
- **アクセスログ:**  
  ユーザーのアクセス状況をログとして記録
- **エラーログ:**  
  システムエラーや例外を記録し、デバッグに活用
- **モニタリング:**  
  システムの稼働状況をリアルタイムで監視

## 9. セキュリティ要件
- **HTTPS通信:**  
  全ての通信をSSL/TLSで暗号化
- **データ暗号化:**  
  保存されるデータは暗号化を施す
- **権限管理:**  
  ユーザーごとのデータアクセス制御を実装

## 10. 制約事項
- **Googleアカウント必須:**  
  サービスの利用にはGoogleアカウントが必要
- **Vercelのリソース:**  
  Vercel上で完結する機能のみを使用
- **ファイル形式:**  
  対応ファイルはPDFのみ

## 11. 開発環境
- **開発言語:**  
  TypeScript
- **フレームワーク:**  
  Next.js
- **ホスティング:**  
  Vercel

## 12. リスクと対応策
- **Google APIの制限:**  
  対応策: API利用制限を確認し、超過しないように設計
- **データセキュリティ:**  
  対応策: データの暗号化とアクセス制御を徹底