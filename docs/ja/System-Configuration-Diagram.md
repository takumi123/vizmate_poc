# システム構成図

## コンポーネントの説明

1. **クライアント**
   - ブラウザ: ユーザーがアプリケーションにアクセスするインターフェース

2. **Vercel**
   - Next.jsアプリケーション: フロントエンドとサーバーサイドのロジックを含むメインのアプリケーション
   - APIルート: バックエンドの機能を提供するNext.jsのAPIルート
   - Vercel KV: セッション管理とキャッシングのための高速なキー値ストア
   - Vercel Blobストレージ: PDFファイルやOCR結果などの大量のデータを保存

3. **外部サービス**
   - Google OAuth: ユーザー認証に使用
   - Google Drive API: ユーザーのGoogle Driveと統合
   - OCRサービス: PDFからの文字認識のための外部OCRサービス

## データフロー

1. ユーザーはブラウザからアプリケーションにアクセス
2. Next.jsアプリケーションはUIを提供し、必要に応じてAPIルートを呼び出す
3. APIルートは各種プロセスを実行し、必要に応じて外部サービスと通信する
4. Vercel KVとBlobストレージはデータの永続性を担当
5. 認証情報や一時的なデータはVercel KVに保存
6. PDFファイルやOCR結果はBlobストレージに保存

## セキュリティ

- すべての通信はHTTPSで暗号化
- Google OAuthを使用した安全な認証
- Vercelが提供する環境変数管理を使用して機密情報を保護

## スケーラビリティ
- Vercelの自動スケーリング機能により、増加したトラフィックに対応可能
- Vercel KVとBlobストレージにより、増加したデータ量に対する柔軟な対応が可能